# Server Configuration
PORT=7000

# Logging
LOG_LEVEL=info  # debug | info | warn | error

# Ratings API Configuration
EMBED_RATINGS_API=true       # Start embedded API as child process
RATINGS_PORT=3001            # Embedded API port
RATINGS_API_URL=             # Override ratings API endpoint (optional, for external API)

# External API Keys
TMDB_API_KEY=                # TMDB API key for fetching TMDB ratings, release dates, and streaming services
                             # Get your API key from: https://www.themoviedb.org/settings/api
                             # Features enabled with TMDB_API_KEY:
                             #   - MPAA/content ratings (cached 24 hours in-memory)
                             #   - TMDB ratings (cached 1 week in database)
                             #   - Release dates (cached 1 week in database)
                             #   - Streaming providers/services (cached 2 weeks in database, region-specific)

OMDB_API_KEY=                # OMDb API key for fetching Rotten Tomatoes and Metacritic scores
                             # Get your API key from: http://www.omdbapi.com/apikey.aspx
                             # Features enabled with OMDB_API_KEY:
                             #   - Rotten Tomatoes ratings (cached 1 week in database)
                             #   - Metacritic scores (cached 1 week in database)

# Update Schedule (for embedded ratings API)
UPDATE_CRON_SCHEDULE=0 2 * * *  # Daily at 2 AM (cron format)

# Redis Configuration (for response caching)
REDIS_URL=                   # Redis connection URL (e.g., redis://localhost:6379)
                             # Leave empty to disable Redis caching and rate limiting
                             # Format: redis://[username]:[password]@[host]:[port]/[database]
CACHE_VERSION=1              # Increment to invalidate all Redis cache (e.g., after IMDb refresh)

# Rate Limiting Configuration (requires Redis)
# Anonymous users (identified by IP address)
RATE_LIMIT_ANONYMOUS_RPS=5             # Requests per second for anonymous users
RATE_LIMIT_ANONYMOUS_BURST=10          # Burst allowance for anonymous users

# Authenticated users (identified by userId in config)
RATE_LIMIT_AUTHENTICATED_RPS=10        # Requests per second for authenticated users
RATE_LIMIT_AUTHENTICATED_BURST=20      # Burst allowance for authenticated users

# Search routes (stricter limits due to higher cost)
RATE_LIMIT_SEARCH_ANONYMOUS_RPS=2      # Requests per second for anonymous search
RATE_LIMIT_SEARCH_ANONYMOUS_BURST=5    # Burst allowance for anonymous search
RATE_LIMIT_SEARCH_AUTHENTICATED_RPS=5  # Requests per second for authenticated search
RATE_LIMIT_SEARCH_AUTHENTICATED_BURST=10  # Burst allowance for authenticated search
